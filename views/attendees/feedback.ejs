
  <h2>Feedback Dashboard</h2>

  <div class="fb-top-bar">
    <input type="search" id="fb-search" placeholder="Search feedback...">
    <select id="fb-type-filter">
      <option value="">All Types</option>
      <option value="Suggestion">Suggestion</option>
      <option value="Complaint">Complaint</option>
      <option value="Question">Question</option>
    </select>
  </div>

  <table id="fb-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Subject</th>
        <th>Type</th>
        <th>Status</th>
        <th>Reply</th>
      </tr>
    </thead>
    <tbody id="fb-body">
      <!-- Dynamic rows inserted by JS -->
    </tbody>
  </table>

  <div class="fb-pagination" id="fb-pagination"></div>

  <!-- Reply Modal -->
  <div class="fb-modal" id="fb-reply-modal">
    <div class="fb-modal-content">
      <h3>Reply to Feedback</h3>
      <textarea id="fb-reply-message" placeholder="Write your reply..."></textarea>
      <button onclick="sendFbReply()">Send Reply</button>
    </div>
  </div>

  <script>
    const fbData = [
      { name: "John Doe", email: "john@example.com", subject: "Login Issue", type: "Complaint", status: "New" },
      { name: "Jane Smith", email: "jane@example.com", subject: "Event Suggestions", type: "Suggestion", status: "Resolved" },
      { name: "Ali Musa", email: "ali@demo.com", subject: "Refund Process", type: "Question", status: "New" },
      { name: "Diana King", email: "diana@site.com", subject: "App crashes", type: "Complaint", status: "New" },
      { name: "Ben Kamau", email: "ben@web.com", subject: "Add comedy events", type: "Suggestion", status: "Resolved" },
    ];

    const fbPerPage = 3;
    let fbCurrentPage = 1;
    let fbSelectedReply = null;

    function renderFbTable(data) {
      const tbody = document.getElementById('fb-body');
      tbody.innerHTML = '';

      const start = (fbCurrentPage - 1) * fbPerPage;
      const end = start + fbPerPage;
      const pageData = data.slice(start, end);

      pageData.forEach((fb, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${fb.name}</td>
          <td>${fb.email}</td>
          <td>${fb.subject}</td>
          <td>${fb.type}</td>
          <td><span class="fb-status ${fb.status}" onclick="toggleFbStatus(${start + index})">${fb.status}</span></td>
          <td><button class="fb-reply-btn" onclick="openFbReply(${start + index})">Reply</button></td>
        `;
        tbody.appendChild(row);
      });

      renderFbPagination(data.length);
    }

    function renderFbPagination(total) {
      const totalPages = Math.ceil(total / fbPerPage);
      const pag = document.getElementById('fb-pagination');
      pag.innerHTML = '';

      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.onclick = () => {
          fbCurrentPage = i;
          filterFbTable();
        };
        if (i === fbCurrentPage) {
          btn.style.background = '#2563eb';
        }
        pag.appendChild(btn);
      }
    }

    function filterFbTable() {
      const searchTerm = document.getElementById('fb-search').value.toLowerCase();
      const typeFilter = document.getElementById('fb-type-filter').value;
      const filtered = fbData.filter(fb =>
        (fb.name.toLowerCase().includes(searchTerm) ||
         fb.email.toLowerCase().includes(searchTerm) ||
         fb.subject.toLowerCase().includes(searchTerm)) &&
        (!typeFilter || fb.type === typeFilter)
      );
      renderFbTable(filtered);
    }

    function toggleFbStatus(index) {
      fbData[index].status = fbData[index].status === "New" ? "Resolved" : "New";
      filterFbTable();
    }

    function openFbReply(index) {
      fbSelectedReply = index;
      document.getElementById('fb-reply-message').value = '';
      document.getElementById('fb-reply-modal').style.display = 'flex';
    }

    function sendFbReply() {
      const message = document.getElementById('fb-reply-message').value;
      if (!message.trim()) return alert("Reply message cannot be empty.");
      alert(`Reply sent to ${fbData[fbSelectedReply].email}:\n\n${message}`);
      document.getElementById('fb-reply-modal').style.display = 'none';
    }

    // Close modal on outside click
    window.onclick = function(event) {
      const modal = document.getElementById('fb-reply-modal');
      if (event.target === modal) {
        modal.style.display = "none";
      }
    }

    document.getElementById('fb-search').addEventListener('input', filterFbTable);
    document.getElementById('fb-type-filter').addEventListener('change', filterFbTable);

    filterFbTable(); // Initial render
  </script>
 
